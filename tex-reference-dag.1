.TH TEX-REFERENCE-DAG 1 "2025-07-29" "TeX-Reference-DAG" "User Commands"
.nh
.SH NAME
tex-reference-dag \- check LaTeX label dependencies
.SH SYNOPSIS
.B tex-reference-dag
.I aux-file
.I tex-files...
.RI [ options ]
.SH DESCRIPTION
.B tex-reference-dag
reads the LaTeX
.I .aux
and
.I .tex
files of a project and verifies that the numbering of labelled statements
(like theorems or definitions) respects the dependency order given by
their references.  A topological ordering of the dependency graph is
printed and optional TikZ graphs can be generated.

The program first reads the \fC.aux\fR file to map every label to its
numerical counter.  It then scans the provided \fC.tex\fR files for
\fC\\label{...}\fR commands and for reference macros specified via a
\fBmacro file\fR.  Each reference introduces a directed edge from the closest
preceding label to the referenced label.  NetworkX is used to analyse
the resulting graph, detect cycles and compute a topological order.
If a label is referenced before its number appears in this order, the
violation is reported together with a suggested renumbering.
Labels should follow the form \fC\\label{<type>:<name>}\fR, e.g.
\fC\\label{lem:zorn}\fR.  Entries with types \fCfig\fR and \fCeq\fR are
ignored by default because their counters are independent of the section
structure.  Additional types can be excluded via the macro configuration
file.
.SH OPTIONS
.TP
.B --macro-file
JSON file describing reference macros.  It may also list
\fCexcluded_types\fR for label prefixes that should be ignored.  If
omitted, the program uses the built-in defaults
\fC\\reflem \\refdef \\refthm \\refcor \\ref\fR and assumes no
future reference macros and excludes the types \fCfig\fR and \fCeq\fR.
.TP
.B --draw-dir
Directory where TikZ graphs are written (default: \fCgraphs\fR).
.TP
.B --draw-each-section
Generate a TikZ graph for every section showing local dependencies.
.TP
.B --draw-collapsed-sections
Generate a collapsed DAG where each node represents a section.
.SH ARGUMENTS
.TP
.I aux-file
Path to the LaTeX \fC.aux\fR file.
.TP
.I tex-files
One or more \fC.tex\fR files that are scanned for labels and references.
.SH EXAMPLES
.TP
Run on a typical project after compilation:
.EX
$ python tex-reference-dag.py main.aux *.tex
.EE
.TP
Use a macro configuration file (e.g. \fCmacros.example.json\fR) and draw graphs:
.EX
$ python tex-reference-dag.py main.aux chap*.tex --macro-file macros.json \
  --draw-dir graphs --draw-collapsed-sections --draw-each-section
.EE
.SH SEE ALSO
.BR python (1),
.BR networkx (1)
.SH AUTHOR
Written by Lino Joss Fidel Haupt.
